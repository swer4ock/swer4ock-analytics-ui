(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{7423:function(e,t,o){Promise.resolve().then(o.bind(o,3500))},3500:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l},dynamic:function(){return r}});var n=o(7437),i=o(2265),d=o(4923);let r="force-dynamic";function l(){let[e,t]=(0,i.useState)(!0),[o,r]=(0,i.useState)(null),[l,s]=(0,i.useState)(null),[c,a]=(0,i.useState)(null),[x,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),[g,u]=(0,i.useState)(null),[y,b]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{t(!0),r(null);let[e,o,n,i,l,c]=await Promise.all([(0,d.Rn)({p_days:90}).catch(()=>[]),(0,d.MI)({p_limit:10}).catch(()=>[]),(0,d.Q6)({p_limit:10}).catch(()=>[]),(0,d.Ue)({p_limit:20}).catch(()=>[]),(0,d.xL)({p_limit:15}).catch(()=>[]),(0,d.jf)({p_limit:20}).catch(()=>[])]);s(e),a(o),h(n),p(i),u(l),b(c)}catch(e){console.error("Avito analytics load error:",e),r(String((null==e?void 0:e.message)||e))}finally{t(!1)}})()},[]);let j=(null==l?void 0:l.reduce((e,t)=>e+(t.contacts||0),0))||0,m=(null==l?void 0:l.reduce((e,t)=>e+(t.cost||0),0))||0,v=j>0?m/j:0;return(0,n.jsxs)("main",{style:{padding:"24px",maxWidth:1400,margin:"0 auto",fontFamily:"system-ui, sans-serif"},children:[(0,n.jsxs)("div",{style:{marginBottom:32},children:[(0,n.jsx)("h1",{style:{color:"#2c3e50",marginBottom:8},children:"\uD83D\uDCCA Avito Аналитика"}),(0,n.jsx)("p",{style:{fontSize:"16px",color:"#6c757d",marginBottom:24},children:"Комплексный анализ объявлений Avito | IT отдел CRM"}),e&&(0,n.jsx)("div",{style:{padding:16,color:"#6c757d"},children:"Загрузка данных…"}),o&&(0,n.jsxs)("div",{style:{padding:16,color:"#721c24",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:8},children:["Ошибка загрузки: ",o]})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#28a745",marginBottom:20},children:"\uD83D\uDCC8 Ключевые показатели"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16,marginBottom:24},children:[(0,n.jsxs)("div",{style:{padding:24,backgroundColor:"#e7f3ff",borderRadius:12,border:"1px solid #b8daff",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,n.jsx)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#0056b3",marginBottom:8},children:j.toLocaleString()}),(0,n.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#0056b3",marginBottom:4},children:"ОБЩИЕ КОНТАКТЫ"}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"По всем стратегиям"})]}),(0,n.jsxs)("div",{style:{padding:24,backgroundColor:"#fff3cd",borderRadius:12,border:"1px solid #ffeaa7",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,n.jsxs)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#856404",marginBottom:8},children:[m.toLocaleString()," ₽"]}),(0,n.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#856404",marginBottom:4},children:"ОБЩИЕ ЗАТРАТЫ"}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"На рекламу"})]}),(0,n.jsxs)("div",{style:{padding:24,backgroundColor:"#d4edda",borderRadius:12,border:"1px solid #c3e6cb",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,n.jsxs)("div",{style:{fontSize:"36px",fontWeight:"bold",color:"#155724",marginBottom:8},children:[v.toFixed(0)," ₽"]}),(0,n.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"#155724",marginBottom:4},children:"СРЕДНИЙ CPL"}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Стоимость контакта"})]})]})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#6f42c1",marginBottom:20},children:"\uD83C\uDFD9️ Топ городов по контактам"}),(0,n.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:16,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Город"}),(0,n.jsx)("th",{style:{padding:16,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Контакты"})]})}),(0,n.jsx)("tbody",{children:c&&0!==c.length?c.map((e,t)=>(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,n.jsx)("td",{style:{padding:16,fontWeight:"600",color:"#2c3e50"},children:e.city}),(0,n.jsx)("td",{style:{padding:16,textAlign:"center",fontSize:"16px",fontWeight:"600"},children:e.contacts})]},t)):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:2,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных"})})})]})})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#fd7e14",marginBottom:20},children:"\uD83D\uDCC2 Анализ по категориям"}),(0,n.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Категория"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Объявлений"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Контакты"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Конверсия"})]})}),(0,n.jsx)("tbody",{children:x&&0!==x.length?x.map((e,t)=>{var o;return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,n.jsx)("td",{style:{padding:12,fontWeight:"600",color:"#2c3e50",fontSize:"14px"},children:e.category}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px",fontWeight:"600"},children:e.ads_count}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px",fontWeight:"600"},children:e.total_contacts}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,n.jsxs)("span",{style:{padding:"2px 6px",borderRadius:8,fontSize:"12px",fontWeight:"600",backgroundColor:e.avg_conversion_rate>=3?"#d4edda":e.avg_conversion_rate>=1?"#fff3cd":"#f8d7da",color:e.avg_conversion_rate>=3?"#155724":e.avg_conversion_rate>=1?"#856404":"#721c24"},children:[null===(o=e.avg_conversion_rate)||void 0===o?void 0:o.toFixed(1),"%"]})})]},t)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:4,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных"})})})]})})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#dc3545",marginBottom:20},children:"\uD83C\uDFC6 Топ объявлений по ROI"}),(0,n.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:800},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:8,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"Ранг"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"Объявление"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"Город"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"Контакты"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"Конверсия"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"CPL"}),(0,n.jsx)("th",{style:{padding:8,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"12px"},children:"ROI Score"})]})}),(0,n.jsx)("tbody",{children:f&&0!==f.length?f.slice(0,10).map((e,t)=>{var o,i,d,r;return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,n.jsxs)("td",{style:{padding:8,fontWeight:"600",color:"#2c3e50",fontSize:"12px"},children:["#",e.profitability_rank||t+1]}),(0,n.jsx)("td",{style:{padding:8,fontWeight:"600",color:"#2c3e50",fontSize:"12px"},children:(null===(o=e.title)||void 0===o?void 0:o.substring(0,30))||e.ad_id}),(0,n.jsx)("td",{style:{padding:8,textAlign:"center",fontSize:"12px"},children:e.city}),(0,n.jsx)("td",{style:{padding:8,textAlign:"center",fontSize:"12px",fontWeight:"600"},children:e.contacts}),(0,n.jsxs)("td",{style:{padding:8,textAlign:"center",fontSize:"12px"},children:[null===(i=e.conversion_rate)||void 0===i?void 0:i.toFixed(1),"%"]}),(0,n.jsxs)("td",{style:{padding:8,textAlign:"center",fontSize:"12px"},children:[null===(d=e.cpl)||void 0===d?void 0:d.toFixed(0)," ₽"]}),(0,n.jsx)("td",{style:{padding:8,textAlign:"center",fontSize:"12px"},children:null===(r=e.roi_score)||void 0===r?void 0:r.toFixed(1)})]},t)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных"})})})]})})})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#20c997",marginBottom:20},children:"\uD83D\uDDFA️ Географическая прибыльность"}),(0,n.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:600},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Город"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Объявлений"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Контакты"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Потенциал"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Конкуренция"})]})}),(0,n.jsx)("tbody",{children:g&&0!==g.length?g.map((e,t)=>{var o;return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,n.jsx)("td",{style:{padding:12,fontWeight:"600",color:"#2c3e50",fontSize:"14px"},children:e.city}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px",fontWeight:"600"},children:e.ads_count}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px",fontWeight:"600"},children:e.total_contacts}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px"},children:null===(o=e.market_potential_score)||void 0===o?void 0:o.toFixed(0)}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px"},children:(0,n.jsx)("span",{style:{padding:"2px 6px",borderRadius:8,fontSize:"12px",fontWeight:"600",backgroundColor:"Высокая"===e.competition_level?"#f8d7da":"Средняя"===e.competition_level?"#fff3cd":"#d4edda",color:"Высокая"===e.competition_level?"#721c24":"Средняя"===e.competition_level?"#856404":"#155724"},children:e.competition_level})})]},t)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных"})})})]})})})]}),(0,n.jsxs)("section",{style:{marginBottom:32},children:[(0,n.jsx)("h2",{style:{color:"#17a2b8",marginBottom:20},children:"\uD83D\uDD27 Рекомендации по оптимизации"}),(0,n.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:800},children:[(0,n.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Объявление"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Проблема"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Рекомендация"}),(0,n.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600",fontSize:"14px"},children:"Приоритет"})]})}),(0,n.jsx)("tbody",{children:y&&0!==y.length?y.slice(0,15).map((e,t)=>{var o;return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,n.jsx)("td",{style:{padding:12,fontWeight:"600",color:"#2c3e50",fontSize:"14px"},children:(null===(o=e.title)||void 0===o?void 0:o.substring(0,25))||e.ad_id}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px"},children:e.issue_type}),(0,n.jsx)("td",{style:{padding:12,fontSize:"14px"},children:e.recommended_action}),(0,n.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:"14px"},children:(0,n.jsx)("span",{style:{padding:"2px 6px",borderRadius:8,fontSize:"12px",fontWeight:"600",backgroundColor:"Высокий"===e.priority_level?"#f8d7da":"#fff3cd",color:"Высокий"===e.priority_level?"#721c24":"#856404"},children:e.priority_level})})]},t)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:4,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных"})})})]})})})]}),(0,n.jsxs)("footer",{style:{padding:24,backgroundColor:"#2c3e50",color:"white",borderRadius:12,textAlign:"center"},children:[(0,n.jsx)("h3",{style:{marginBottom:12},children:"\uD83D\uDCCA Avito Аналитика"}),(0,n.jsx)("p",{style:{marginBottom:16,opacity:.8},children:"Комплексный анализ объявлений | IT отдел CRM"}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap"},children:[(0,n.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83D\uDCC8 ",j.toLocaleString()," контактов"]}),(0,n.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83D\uDCB0 ",m.toLocaleString()," ₽ затрат"]}),(0,n.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83C\uDFAF ",v.toFixed(0)," ₽ средний CPL"]}),(0,n.jsx)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:"⚡ Real-time данные"})]})]})]})}},4923:function(e,t,o){"use strict";async function n(e,t){let o="".concat("https://uumrjikuqewlakczbnbs.supabase.co","/rest/v1/rpc/").concat(e),n="sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",i=await fetch(o,{method:"POST",headers:{apikey:n,Authorization:"Bearer ".concat(n),"Content-Type":"application/json",Prefer:"count=none"},body:t?JSON.stringify(t):"{}",next:{revalidate:0},cache:"no-store"});if(!i.ok){let t=await i.text(),o=Error("RPC ".concat(e," failed: ").concat(i.status," ").concat(t));throw o.status=i.status,o}return i.json()}async function i(e,t){let o=async e=>{try{return await n(e,t)}catch(e){throw e}};try{return await o("".concat(e,"_v1"))}catch(r){var i;let t=String(null!==(i=null==r?void 0:r.message)&&void 0!==i?i:r),n=null==r?void 0:r.status,d=t.includes("PGRST203")||t.includes("Could not choose the best candidate function");if(404===n||405===n||d)return await o(e);throw r}}async function d(e){return i("get_avito_cpl_by_strategy",e)}async function r(e){return i("get_avito_top_cities_sales",e)}async function l(e){return i("get_unified_ads_performance",e)}async function s(e){return i("get_avito_positions_analysis",e)}async function c(e){return i("get_geo_profitability_analysis",e)}async function a(e){return i("get_optimization_recommendations",e)}o.d(t,{MI:function(){return r},Q6:function(){return s},Rn:function(){return d},Ue:function(){return l},WW:function(){return i},jf:function(){return a},xL:function(){return c}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7423)}),_N_E=e.O()}]);