(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{9835:function(e,t,o){Promise.resolve().then(o.bind(o,1943))},1943:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var i=o(7437),n=o(2265),r=o(4923);function l(){var e,t,o,l,d,s,a,c,u,x,g,h;let[p,f]=(0,n.useState)(null),[m,b]=(0,n.useState)(null),[y,v]=(0,n.useState)(null),[j,_]=(0,n.useState)("all");(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{let t="all"===j?void 0:{p_company:j},[o,i]=await Promise.all([(0,r.WW)("get_avito_bids_summary",t),(0,r.WW)("get_avito_positions_analysis",t)]);if(!e)return;f(o),b(i)}catch(t){if(console.error("Avito Bids load error:",t),!e)return;v(String((null==t?void 0:t.message)||t)),f([]),b([])}})(),()=>{e=!1}},[j]);let S=null===p||null===m,B=null==p?void 0:p[0];return(0,i.jsxs)("main",{style:{padding:"24px",maxWidth:1400,margin:"0 auto",fontFamily:"system-ui, sans-serif"},children:[(0,i.jsxs)("div",{style:{marginBottom:32},children:[(0,i.jsx)("h1",{style:{color:"#2c3e50",marginBottom:8},children:"\uD83D\uDCB0 Avito Автобиддер - Аналитика ставок"}),(0,i.jsx)("p",{style:{fontSize:"16px",color:"#6c757d",marginBottom:24},children:"Анализ 14,000+ собранных ставок | IT отдел CRM"}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[(0,i.jsx)("label",{htmlFor:"company",style:{fontSize:14,color:"#444"},children:"Компания:"}),(0,i.jsx)("select",{id:"company",value:j,onChange:e=>_(e.target.value),style:{padding:"6px 10px",border:"1px solid #e1e1e1",borderRadius:6},children:[{value:"all",label:"Все компании"},{value:"seltka",label:"Сэлтка (Кирилл)"},{value:"iltech",label:"Ильтех (Ильнур)"},{value:"mituroom",label:"mituroom (Артем)"}].map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),!S&&B&&(0,i.jsx)("div",{style:{padding:16,backgroundColor:"#e7f3ff",borderRadius:8,border:"1px solid #b8daff"},children:(0,i.jsxs)("p",{style:{margin:0,fontSize:"14px",color:"#0056b3"},children:["\uD83D\uDCCA ",(0,i.jsx)("strong",{children:"Последнее обновление:"})," ",new Date(B.last_updated).toLocaleString("ru-RU")]})}),S&&(0,i.jsx)("div",{style:{padding:16,color:"#6c757d"},children:"Загрузка данных…"}),y&&(0,i.jsxs)("div",{style:{padding:16,color:"#721c24",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:8,marginTop:12},children:["Ошибка загрузки: ",y]})]}),(0,i.jsxs)("section",{style:{marginBottom:32},children:[(0,i.jsx)("h2",{style:{color:"#28a745",marginBottom:20},children:"\uD83D\uDCC8 Сводка по автобиддеру"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16,marginBottom:24},children:[(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#e7f3ff",borderRadius:12,border:"1px solid #b8daff",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold",color:"#0056b3",marginBottom:8},children:null!==(s=null==B?void 0:null===(e=B.total_bids)||void 0===e?void 0:e.toLocaleString())&&void 0!==s?s:"—"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#0056b3",marginBottom:4},children:"ОБЩЕЕ КОЛИЧЕСТВО СТАВОК"}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Проанализировано IT отделом"})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#fff3cd",borderRadius:12,border:"1px solid #ffeaa7",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold",color:"#856404",marginBottom:8},children:(null==B?void 0:B.avg_current_bid)?"".concat(B.avg_current_bid.toFixed(1)," ₽"):"—"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#856404",marginBottom:4},children:"СРЕДНЯЯ ТЕКУЩАЯ СТАВКА"}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Активные ставки"})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#d4edda",borderRadius:12,border:"1px solid #c3e6cb",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold",color:"#155724",marginBottom:8},children:(null==B?void 0:B.avg_recommended_bid)?"".concat(B.avg_recommended_bid.toFixed(1)," ₽"):"—"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#155724",marginBottom:4},children:"РЕКОМЕНДОВАННАЯ СТАВКА"}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Оптимальная цена"})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#f8d7da",borderRadius:12,border:"1px solid #f5c6cb",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold",color:"#721c24",marginBottom:8},children:(null==B?void 0:B.success_rate)?"".concat(B.success_rate,"%"):"—"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#721c24",marginBottom:4},children:"ЭФФЕКТИВНОСТЬ СИСТЕМЫ"}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Успешные ставки"})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#e2e3e5",borderRadius:12,border:"1px solid #d6d8db",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",fontWeight:"bold",color:"#383d41",marginBottom:8},children:null!==(a=null==B?void 0:null===(t=B.total_with_bids)||void 0===t?void 0:t.toLocaleString())&&void 0!==a?a:"—"}),(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#383d41",marginBottom:4},children:"АКТИВНЫЕ СТАВКИ"}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#6c757d"},children:"Установленные ставки"})]})]})]}),(0,i.jsxs)("section",{style:{marginBottom:32},children:[(0,i.jsx)("h2",{style:{color:"#6f42c1",marginBottom:20},children:"\uD83C\uDFAF Анализ по позициям"}),(0,i.jsx)("div",{style:{border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",backgroundColor:"white",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:16,textAlign:"left",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Диапазон позиций"}),(0,i.jsx)("th",{style:{padding:16,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Количество ставок"}),(0,i.jsx)("th",{style:{padding:16,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Средняя текущая"}),(0,i.jsx)("th",{style:{padding:16,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Средняя рекомендуемая"}),(0,i.jsx)("th",{style:{padding:16,textAlign:"center",borderBottom:"2px solid #e9ecef",fontWeight:"600"},children:"Эффективность"})]})}),(0,i.jsx)("tbody",{children:m&&0!==m.length?m.map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"white":"#fafbfc"},children:[(0,i.jsx)("td",{style:{padding:16,fontWeight:"600",color:"#2c3e50"},children:e.position_range}),(0,i.jsx)("td",{style:{padding:16,textAlign:"center",fontSize:"16px",fontWeight:"600"},children:e.count_bids}),(0,i.jsxs)("td",{style:{padding:16,textAlign:"center"},children:[e.avg_current_bid.toFixed(1)," ₽"]}),(0,i.jsxs)("td",{style:{padding:16,textAlign:"center"},children:[e.avg_recommended_bid.toFixed(1)," ₽"]}),(0,i.jsx)("td",{style:{padding:16,textAlign:"center"},children:(0,i.jsxs)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:"12px",fontWeight:"600",backgroundColor:e.success_rate>=80?"#d4edda":e.success_rate>=60?"#fff3cd":"#f8d7da",color:e.success_rate>=80?"#155724":e.success_rate>=60?"#856404":"#721c24"},children:[e.success_rate,"%"]})})]},t)):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:5,style:{padding:32,textAlign:"center",color:"#888"},children:"Нет данных по позициям"})})})]})})]}),(0,i.jsxs)("section",{style:{marginBottom:32},children:[(0,i.jsx)("h2",{style:{color:"#20c997",marginBottom:20},children:"\uD83D\uDD27 Статус системы автобиддера"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#f8f9fa",borderRadius:12,border:"1px solid #e9ecef",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("h3",{style:{color:"#495057",marginBottom:16},children:"\uD83D\uDCCA Статистика данных"}),(0,i.jsxs)("ul",{style:{margin:0,paddingLeft:20,color:"#6c757d"},children:[(0,i.jsxs)("li",{style:{marginBottom:8},children:["Обработано: ",null!==(c=null==B?void 0:null===(o=B.total_bids)||void 0===o?void 0:o.toLocaleString())&&void 0!==c?c:"—"," ставок"]}),(0,i.jsxs)("li",{style:{marginBottom:8},children:["Активных ставок: ",null!==(u=null==B?void 0:null===(l=B.total_with_bids)||void 0===l?void 0:l.toLocaleString())&&void 0!==u?u:"—"]}),(0,i.jsxs)("li",{style:{marginBottom:8},children:["Успешность: ",null!==(x=null==B?void 0:B.success_rate)&&void 0!==x?x:"—","%"]}),(0,i.jsxs)("li",{style:{marginBottom:8},children:["Последний сбор: ",B?new Date(B.last_updated).toLocaleDateString("ru-RU"):"—"]})]})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#f8f9fa",borderRadius:12,border:"1px solid #e9ecef",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("h3",{style:{color:"#dc3545",marginBottom:16},children:"⚠️ Рекомендации"}),(0,i.jsxs)("ul",{style:{margin:0,paddingLeft:20,color:"#6c757d"},children:[(0,i.jsx)("li",{style:{marginBottom:8},children:"Оптимизировать ставки в топ-3 позициях"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Увеличить охват позиций 11-20"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Мониторить эффективность по диапазонам"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Регулярно обновлять данные из API"})]})]}),(0,i.jsxs)("div",{style:{padding:24,backgroundColor:"#f8f9fa",borderRadius:12,border:"1px solid #e9ecef",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,i.jsx)("h3",{style:{color:"#28a745",marginBottom:16},children:"\uD83D\uDE80 Следующие шаги"}),(0,i.jsxs)("ul",{style:{margin:0,paddingLeft:20,color:"#6c757d"},children:[(0,i.jsx)("li",{style:{marginBottom:8},children:"Добавить графики трендов ставок"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Интегрировать с реальными API"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Создать систему алертов"}),(0,i.jsx)("li",{style:{marginBottom:8},children:"Автоматизировать сбор данных"})]})]})]})]}),(0,i.jsxs)("footer",{style:{padding:24,backgroundColor:"#2c3e50",color:"white",borderRadius:12,textAlign:"center"},children:[(0,i.jsx)("h3",{style:{marginBottom:12},children:"⚡ Avito Автобиддер - Система управления ставками"}),(0,i.jsx)("p",{style:{marginBottom:16,opacity:.8},children:"IT отдел CRM | Анализ 14,000+ ставок | Профессиональная оптимизация"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap"},children:[(0,i.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83D\uDCCA ",null!==(g=null==B?void 0:null===(d=B.total_bids)||void 0===d?void 0:d.toLocaleString())&&void 0!==g?g:"—"," ставок"]}),(0,i.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83C\uDFAF ",null!==(h=null==B?void 0:B.success_rate)&&void 0!==h?h:"—","% эффективность"]}),(0,i.jsxs)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:["\uD83D\uDCB0 ",(null==B?void 0:B.avg_recommended_bid)?B.avg_recommended_bid.toFixed(1):"—"," ₽ средняя ставка"]}),(0,i.jsx)("span",{style:{padding:"6px 12px",backgroundColor:"#34495e",borderRadius:16,fontSize:"12px"},children:"\uD83D\uDD04 IT отдел активен"})]})]})]})}},4923:function(e,t,o){"use strict";async function i(e,t){let o="".concat("https://uumrjikuqewlakczbnbs.supabase.co","/rest/v1/rpc/").concat(e),i="sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",n=await fetch(o,{method:"POST",headers:{apikey:i,Authorization:"Bearer ".concat(i),"Content-Type":"application/json",Prefer:"count=none"},body:t?JSON.stringify(t):"{}",next:{revalidate:0},cache:"no-store"});if(!n.ok){let t=await n.text(),o=Error("RPC ".concat(e," failed: ").concat(n.status," ").concat(t));throw o.status=n.status,o}return n.json()}async function n(e,t){let o=async e=>{try{return await i(e,t)}catch(e){throw e}};try{return await o("".concat(e,"_v1"))}catch(l){var n;let t=String(null!==(n=null==l?void 0:l.message)&&void 0!==n?n:l),i=null==l?void 0:l.status,r=t.includes("PGRST203")||t.includes("Could not choose the best candidate function");if(404===i||405===i||r)return await o(e);throw l}}async function r(e){return n("get_avito_cpl_by_strategy",e)}async function l(e){return n("get_avito_top_cities_sales",e)}async function d(e){return n("get_unified_ads_performance",e)}async function s(e){return n("get_avito_positions_analysis",e)}async function a(e){return n("get_geo_profitability_analysis",e)}async function c(e){return n("get_optimization_recommendations",e)}o.d(t,{MI:function(){return l},Q6:function(){return s},Rn:function(){return r},Ue:function(){return d},WW:function(){return n},jf:function(){return c},xL:function(){return a}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=9835)}),_N_E=e.O()}]);