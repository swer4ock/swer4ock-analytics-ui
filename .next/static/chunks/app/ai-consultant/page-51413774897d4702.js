(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{8550:function(e,t,n){Promise.resolve().then(n.bind(n,1512))},1512:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var i=n(7437),s=n(2265);function r(){let[e,t]=(0,s.useState)([]),[n,r]=(0,s.useState)(""),[o,a]=(0,s.useState)(!1),l=async n=>{if(!n.trim())return;let i=[...e,{role:"user",content:n}];t(i),r(""),a(!0);try{let e=await fetch("/api/ai-consultant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:i})});if(!e.ok)throw Error(await e.text());let n=await e.json();t(e=>[...e,{role:"assistant",content:n.answer}])}catch(e){t(t=>[...t,{role:"assistant",content:"Ошибка: ".concat((null==e?void 0:e.message)||e)}])}finally{a(!1)}},d=async()=>{n.trim()&&await l(n)};return(0,s.useEffect)(()=>{let t=new URL(window.location.href).searchParams.get("q");t&&0===e.length&&setTimeout(()=>{l(t)},50)},[]),(0,i.jsxs)("main",{style:{maxWidth:900,margin:"0 auto",padding:24,fontFamily:"system-ui, sans-serif"},children:[(0,i.jsx)("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8},children:"\uD83E\uDD16 AI‑консультант по данным"}),(0,i.jsx)("p",{style:{color:"#6c757d",marginBottom:16},children:"Задайте вопрос по данным (Avito, продажи, стратегии). В следующей итерации подключим реальный LLM (Gemini/OpenAI) и Supabase‑grounding."}),(0,i.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:16,minHeight:360,background:"#fff"},children:[0===e.length&&(0,i.jsx)("div",{style:{color:"#888"},children:"Пока нет сообщений. Спросите, например: \xabПокажи контакты по Казани для Сэлтка за последние 7 дней\xbb"}),e.map((e,t)=>(0,i.jsxs)("div",{style:{padding:"8px 12px",margin:"8px 0",borderRadius:8,background:"user"===e.role?"#e7f3ff":"#f8f9fa",border:"1px solid #e1e1e1"},children:[(0,i.jsxs)("strong",{children:["user"===e.role?"Вы":"Консультант",":"]})," ",e.content]},t))]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12},children:[(0,i.jsx)("input",{value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d()},placeholder:"Ваш вопрос...",style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid #e1e1e1"}}),(0,i.jsx)("button",{onClick:d,disabled:o,style:{padding:"10px 14px",borderRadius:8,border:"1px solid #e1e1e1",background:"#4f46e5",color:"#fff",fontWeight:600},children:o?"Отправка…":"Отправить"})]}),(0,i.jsx)("div",{style:{marginTop:16,fontSize:12,color:"#6c757d"},children:"Подключение к реальной модели потребует API ключ и доступ к Supabase. Эту заглушку можно расширить для ответов с графиками и SQL."})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8550)}),_N_E=e.O()}]);