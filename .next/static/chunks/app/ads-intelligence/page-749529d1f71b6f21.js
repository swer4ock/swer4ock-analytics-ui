(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[955],{8473:function(e,t,n){Promise.resolve().then(n.bind(n,5297))},5297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var i=n(7437),o=n(2265),d=n(4923);function r(){let[e,t]=(0,o.useState)("seltka"),[n,r]=(0,o.useState)(null),[l,s]=(0,o.useState)(null),[c,a]=(0,o.useState)(null),[f,g]=(0,o.useState)(null),[h,x]=(0,o.useState)(null);(0,o.useEffect)(()=>{let t=!0;return(async()=>{try{x(null),r(null),s(null),a(null),g(null);let[n,i,o,l]=await Promise.all([(0,d.WW)("get_unified_ads_performance",{p_company:e,p_limit:25}),(0,d.WW)("get_avito_positions_analysis",{p_limit:8}),(0,d.WW)("get_geo_profitability_analysis",{p_company:e,p_limit:10}),(0,d.WW)("get_optimization_recommendations",{p_company:e,p_limit:15})]);if(!t)return;r(n),s(i),a(o),g(l)}catch(e){if(!t)return;console.error("Ads Intelligence load error:",e),x(String((null==e?void 0:e.message)||e)),r([]),s([]),a([]),g([])}})(),()=>{t=!1}},[e]);let p=null===n||null===l||null===c||null===f,u=(e,t)=>"roi"===t?e>=50?"#28a745":e>=25?"#ffc107":"#dc3545":"conversion"===t?e>=5?"#28a745":e>=2?"#ffc107":"#dc3545":"efficiency"===t?e>=.9?"#28a745":e>=.7?"#ffc107":"#dc3545":"#6c757d";return(0,i.jsxs)("main",{style:{padding:24,maxWidth:1600,margin:"0 auto",fontFamily:"system-ui, sans-serif"},children:[(0,i.jsxs)("header",{style:{marginBottom:32},children:[(0,i.jsx)("h1",{style:{fontSize:32,fontWeight:700,marginBottom:8,color:"#2c3e50"},children:"\uD83C\uDFAF Ads Intelligence — Анализ самых перспективных объявлений"}),(0,i.jsx)("p",{style:{color:"#6c757d",fontSize:16,marginBottom:20},children:"Единый дашборд для выявления золотых позиций: ROI-анализ, конверсионная эффективность, географическая прибыльность"}),(0,i.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[(0,i.jsx)("label",{htmlFor:"company",style:{fontSize:14,fontWeight:600,color:"#444"},children:"Компания:"}),(0,i.jsx)("select",{id:"company",value:e,onChange:e=>t(e.target.value),style:{padding:"8px 12px",border:"1px solid #e1e1e1",borderRadius:8,fontSize:14},children:[{value:"seltka",label:"Сэлтка (Кирилл)"},{value:"iltech",label:"Ильтех (Ильнур)"},{value:"mituroom",label:"mituroom (Артем)"}].map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),p&&(0,i.jsx)("div",{style:{padding:32,textAlign:"center",color:"#6c757d",fontSize:16},children:"\uD83D\uDD04 Анализируем данные объявлений..."}),h&&(0,i.jsxs)("div",{style:{padding:20,color:"#721c24",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:8,marginBottom:24},children:["❌ Ошибка загрузки: ",h]}),!p&&!h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("section",{style:{marginBottom:32},children:[(0,i.jsx)("h2",{style:{fontSize:24,fontWeight:700,marginBottom:16,color:"#28a745"},children:"\uD83C\uDFC6 Топ объявлений по ROI (Рентабельность инвестиций)"}),(0,i.jsx)("div",{style:{background:"#fff",border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f8f9fa"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Ранг"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Объявление"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Город"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Контакты"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Конверсия"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"CPL (₽)"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"ROI Score"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Эффективность ставки"})]})}),(0,i.jsx)("tbody",{children:(n||[]).slice(0,15).map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"#fff":"#fafbfc"},children:[(0,i.jsxs)("td",{style:{padding:12,fontWeight:700,color:t<3?"#ffc107":"#6c757d"},children:["#",e.profitability_rank]}),(0,i.jsxs)("td",{style:{padding:12,maxWidth:200},children:[(0,i.jsx)("div",{style:{fontWeight:600,fontSize:14,color:"#2c3e50",marginBottom:2},children:e.title}),(0,i.jsx)("div",{style:{fontSize:12,color:"#6c757d"},children:e.category})]}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:14},children:e.city}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:16,fontWeight:600},children:e.contacts}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,i.jsxs)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,fontWeight:600,background:u(e.conversion_rate,"conversion")+"20",color:u(e.conversion_rate,"conversion")},children:[e.conversion_rate,"%"]})}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center",fontSize:14,fontWeight:600},children:e.cpl?Math.round(e.cpl).toLocaleString("ru-RU"):"—"}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"6px 10px",borderRadius:16,fontSize:13,fontWeight:700,background:u(e.roi_score,"roi")+"20",color:u(e.roi_score,"roi")},children:Math.round(e.roi_score)})}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,fontWeight:600,background:u(e.bid_efficiency,"efficiency")+"20",color:u(e.bid_efficiency,"efficiency")},children:e.bid_efficiency.toFixed(2)})})]},e.ad_id))})]})})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:32},children:[(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#6f42c1"},children:"\uD83D\uDCC2 Анализ по категориям"}),(0,i.jsx)("div",{style:{background:"#fff",border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f8f9fa"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:10,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Категория"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Объявлений"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Контакты"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Конверсия"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Score"})]})}),(0,i.jsx)("tbody",{children:(l||[]).map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"#fff":"#fafbfc"},children:[(0,i.jsx)("td",{style:{padding:10,fontSize:13,fontWeight:600,color:"#2c3e50"},children:e.category}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13},children:e.ads_count}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13,fontWeight:600},children:e.total_contacts}),(0,i.jsxs)("td",{style:{padding:10,textAlign:"center",fontSize:12},children:[e.avg_conversion_rate,"%"]}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13,fontWeight:700,color:"#28a745"},children:Math.round(e.category_score)})]},e.category))})]})})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16,color:"#fd7e14"},children:"\uD83D\uDDFA️ Географическая прибыльность"}),(0,i.jsx)("div",{style:{background:"#fff",border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f8f9fa"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:10,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Город"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Контакты"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"CPL (₽)"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Потенциал"}),(0,i.jsx)("th",{style:{padding:10,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:12,fontWeight:600},children:"Конкуренция"})]})}),(0,i.jsx)("tbody",{children:(c||[]).map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"#fff":"#fafbfc"},children:[(0,i.jsx)("td",{style:{padding:10,fontSize:13,fontWeight:600,color:"#2c3e50"},children:e.city}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13,fontWeight:600},children:e.total_contacts}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13},children:e.avg_cpl?Math.round(e.avg_cpl).toLocaleString("ru-RU"):"—"}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center",fontSize:13,fontWeight:700,color:"#28a745"},children:Math.round(e.market_potential_score)}),(0,i.jsx)("td",{style:{padding:10,textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"2px 6px",borderRadius:8,fontSize:11,fontWeight:600,background:"Высокая"===e.competition_level?"#f8d7da":"Средняя"===e.competition_level?"#fff3cd":"#d4edda",color:"Высокая"===e.competition_level?"#721c24":"Средняя"===e.competition_level?"#856404":"#155724"},children:e.competition_level})})]},e.city))})]})})]})]}),(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{style:{fontSize:24,fontWeight:700,marginBottom:16,color:"#dc3545"},children:"\uD83D\uDD27 Рекомендации по оптимизации"}),(0,i.jsx)("div",{style:{background:"#fff",border:"1px solid #e9ecef",borderRadius:12,overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{style:{background:"#f8f9fa"},children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Объявление"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Проблема"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Рекомендация"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"left",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Потенциал улучшения"}),(0,i.jsx)("th",{style:{padding:12,textAlign:"center",borderBottom:"2px solid #e9ecef",fontSize:13,fontWeight:600},children:"Приоритет"})]})}),(0,i.jsx)("tbody",{children:(f||[]).slice(0,12).map((e,t)=>(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4",backgroundColor:t%2==0?"#fff":"#fafbfc"},children:[(0,i.jsxs)("td",{style:{padding:12,maxWidth:180},children:[(0,i.jsx)("div",{style:{fontSize:13,fontWeight:600,color:"#2c3e50",marginBottom:2},children:e.title}),(0,i.jsx)("div",{style:{fontSize:11,color:"#6c757d"},children:e.city})]}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,background:e.issue_type.includes("Низкая")?"#f8d7da":e.issue_type.includes("Высокий")?"#fff3cd":"#e2e3e5",color:e.issue_type.includes("Низкая")?"#721c24":e.issue_type.includes("Высокий")?"#856404":"#383d41"},children:e.issue_type})}),(0,i.jsx)("td",{style:{padding:12,fontSize:13,color:"#2c3e50"},children:e.recommended_action}),(0,i.jsx)("td",{style:{padding:12,fontSize:13,color:"#28a745",fontWeight:600},children:e.potential_improvement}),(0,i.jsx)("td",{style:{padding:12,textAlign:"center"},children:(0,i.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:11,fontWeight:600,background:"Высокий"===e.priority_level?"#d4edda":"#fff3cd",color:"Высокий"===e.priority_level?"#155724":"#856404"},children:e.priority_level})})]},"".concat(e.ad_id,"-").concat(e.issue_type)))})]})})]})]}),(0,i.jsxs)("footer",{style:{marginTop:40,padding:24,background:"#2c3e50",color:"#fff",borderRadius:12,textAlign:"center"},children:[(0,i.jsx)("h3",{style:{marginBottom:12},children:"\uD83C\uDFAF Ads Intelligence Dashboard"}),(0,i.jsx)("p",{style:{marginBottom:16,opacity:.8},children:"Единая система анализа объявлений для выявления самых перспективных позиций | IT отдел CRM"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap"},children:[(0,i.jsx)("span",{style:{padding:"6px 12px",background:"#34495e",borderRadius:16,fontSize:12},children:"\uD83C\uDFC6 ROI-анализ"}),(0,i.jsx)("span",{style:{padding:"6px 12px",background:"#34495e",borderRadius:16,fontSize:12},children:"\uD83D\uDCCA Конверсионная эффективность"}),(0,i.jsx)("span",{style:{padding:"6px 12px",background:"#34495e",borderRadius:16,fontSize:12},children:"\uD83D\uDDFA️ Географическая прибыльность"}),(0,i.jsx)("span",{style:{padding:"6px 12px",background:"#34495e",borderRadius:16,fontSize:12},children:"\uD83D\uDD27 Рекомендации по оптимизации"})]})]})]})}},4923:function(e,t,n){"use strict";async function i(e,t){let n="".concat("https://uumrjikuqewlakczbnbs.supabase.co","/rest/v1/rpc/").concat(e),i="sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",o=await fetch(n,{method:"POST",headers:{apikey:i,Authorization:"Bearer ".concat(i),"Content-Type":"application/json",Prefer:"count=none"},body:t?JSON.stringify(t):"{}",next:{revalidate:0},cache:"no-store"});if(!o.ok){let t=await o.text(),n=Error("RPC ".concat(e," failed: ").concat(o.status," ").concat(t));throw n.status=o.status,n}return o.json()}async function o(e,t){let n=async e=>{try{return await i(e,t)}catch(e){throw e}};try{return await n("".concat(e,"_v1"))}catch(r){var o;let t=String(null!==(o=null==r?void 0:r.message)&&void 0!==o?o:r),i=null==r?void 0:r.status,d=t.includes("PGRST203")||t.includes("Could not choose the best candidate function");if(404===i||405===i||d)return await n(e);throw r}}async function d(e){return o("get_avito_cpl_by_strategy",e)}async function r(e){return o("get_avito_top_cities_sales",e)}async function l(e){return o("get_unified_ads_performance",e)}async function s(e){return o("get_avito_positions_analysis",e)}async function c(e){return o("get_geo_profitability_analysis",e)}async function a(e){return o("get_optimization_recommendations",e)}n.d(t,{MI:function(){return r},Q6:function(){return s},Rn:function(){return d},Ue:function(){return l},WW:function(){return o},jf:function(){return a},xL:function(){return c}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8473)}),_N_E=e.O()}]);