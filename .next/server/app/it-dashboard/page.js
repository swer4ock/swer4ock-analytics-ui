(()=>{var e={};e.id=516,e.ids=[516],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9432:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>d.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>a}),r(9555),r(2029),r(5866);var s=r(3191),i=r(8716),o=r(7922),d=r.n(o),n=r(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let a=["",{children:["it-dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9555)),"/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/it-dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/it-dashboard/page.tsx"],p="/it-dashboard/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/it-dashboard/page",pathname:"/it-dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},7698:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},9555:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,dynamic:()=>i});var s=r(9510);let i="force-dynamic";async function o(){try{let e=await fetch("https://uumrjikuqewlakczbnbs.supabase.co/rest/v1/rpc/get_it_tasks",{method:"POST",headers:{"Content-Type":"application/json",apikey:"sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",Authorization:"Bearer sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",Prefer:"count=none"},body:JSON.stringify({p_limit:50})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching tasks:",e),[]}}async function d(){try{let e=await fetch("https://uumrjikuqewlakczbnbs.supabase.co/rest/v1/rpc/get_it_errors",{method:"POST",headers:{"Content-Type":"application/json",apikey:"sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",Authorization:"Bearer sb_publishable_sfsDkZToPxhGJC8-WdwoiQ_ZMNTcW6m",Prefer:"count=none"},body:JSON.stringify({p_limit:20})});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching errors:",e),[]}}async function n(){let[e,t]=await Promise.all([o(),d()]),r=e.length,i=e.filter(e=>"in_progress"===e.status).length,n=e.filter(e=>"queued"===e.status).length,l=e.filter(e=>"completed"===e.status).length,a=e.filter(e=>"P1"===e.priority).length,c=t.length;return(0,s.jsxs)("main",{style:{padding:24,fontFamily:"system-ui, sans-serif"},children:[s.jsx("h1",{style:{marginBottom:32},children:"\uD83D\uDDA5️ IT Dashboard"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:32},children:[(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"Всего задач"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#007bff"},children:r})]}),(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"В работе"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#ffc107"},children:i})]}),(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"В очереди"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#6c757d"},children:n})]}),(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"Готово"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#28a745"},children:l})]}),(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"P1 задач"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#dc3545"},children:a})]}),(0,s.jsxs)("div",{style:{padding:20,backgroundColor:"#f8f9fa",borderRadius:8,border:"1px solid #e9ecef",textAlign:"center"},children:[s.jsx("h3",{style:{margin:"0 0 8px 0",color:"#495057"},children:"Ошибок"}),s.jsx("div",{style:{fontSize:32,fontWeight:"bold",color:"#fd7e14"},children:c})]})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24},children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{marginBottom:16},children:"\uD83D\uDCCB Задачи IT-отдела"}),s.jsx("div",{style:{border:"1px solid #e9ecef",borderRadius:8,overflow:"hidden",backgroundColor:"white"},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"ID"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Заголовок"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Статус"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Приоритет"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Обновлено"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Создатель"})]})}),s.jsx("tbody",{children:e.length>0?e.map(e=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4"},children:[s.jsx("td",{style:{padding:12,fontSize:14},children:e.id.slice(-8)}),s.jsx("td",{style:{padding:12,fontSize:14,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),s.jsx("td",{style:{padding:12,fontSize:14},children:s.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,backgroundColor:"completed"===e.status?"#d4edda":"in_progress"===e.status?"#fff3cd":"#e2e3e5",color:"completed"===e.status?"#155724":"in_progress"===e.status?"#856404":"#383d41"},children:e.status})}),s.jsx("td",{style:{padding:12,fontSize:14},children:s.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,backgroundColor:"P1"===e.priority?"#f8d7da":"#e2e3e5",color:"P1"===e.priority?"#721c24":"#383d41"},children:e.priority})}),s.jsx("td",{style:{padding:12,fontSize:14},children:new Date(e.updated_at).toLocaleDateString("ru-RU")}),s.jsx("td",{style:{padding:12,fontSize:14},children:e.created_by})]},e.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:6,style:{padding:24,textAlign:"center",color:"#6c757d"},children:"Задач нет"})})})]})})]}),(0,s.jsxs)("div",{children:[s.jsx("h2",{style:{marginBottom:16},children:"\uD83D\uDEA8 Ошибки системы"}),s.jsx("div",{style:{border:"1px solid #e9ecef",borderRadius:8,overflow:"hidden",backgroundColor:"white"},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{backgroundColor:"#f8f9fa"},children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Время"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Тип"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Сообщение"}),s.jsx("th",{style:{padding:12,textAlign:"left",borderBottom:"1px solid #e9ecef"},children:"Задача"})]})}),s.jsx("tbody",{children:t.length>0?t.map(e=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #f1f3f4"},children:[s.jsx("td",{style:{padding:12,fontSize:14},children:new Date(e.created_at).toLocaleString("ru-RU")}),s.jsx("td",{style:{padding:12,fontSize:14},children:s.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:12,backgroundColor:"#ffeaa7",color:"#d63031"},children:e.error_type})}),s.jsx("td",{style:{padding:12,fontSize:14,maxWidth:200,overflow:"hidden",textOverflow:"ellipsis"},children:e.error_message}),s.jsx("td",{style:{padding:12,fontSize:14},children:e.task_id?e.task_id.slice(-8):"-"})]},e.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:4,style:{padding:24,textAlign:"center",color:"#6c757d"},children:"Ошибок нет"})})})]})})]})]})]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var s=r(9510);let i={title:"swer4ock analytics"};function o({children:e}){return s.jsx("html",{lang:"ru",children:s.jsx("body",{style:{margin:0,fontFamily:"system-ui, sans-serif"},children:e})})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[819],()=>r(9432));module.exports=s})();