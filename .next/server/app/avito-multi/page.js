(()=>{var e={};e.id=527,e.ids=[527],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>a}),r(5397),r(2029),r(5866);var s=r(3191),i=r(8716),o=r(7922),l=r.n(o),d=r(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let a=["",{children:["avito-multi",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5397)),"/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/avito-multi/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/avito-multi/page.tsx"],x="/avito-multi/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/avito-multi/page",pathname:"/avito-multi",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},7698:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},3716:(e,t,r)=>{Promise.resolve().then(r.bind(r,8151))},5303:()=>{},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,dynamic:()=>d});var s=r(326),i=r(7577),o=r.n(i),l=r(5047);let d="force-dynamic";function n(){(0,l.useSearchParams)(),(0,l.useRouter)();let[e,t]=(0,i.useState)("seltka"),[r,d]=(0,i.useState)(7),[n,a]=(0,i.useState)(""),[c,x]=(0,i.useState)(null),[p,u]=(0,i.useState)(null),[h,g]=(0,i.useState)(null),[f,m]=(0,i.useState)(null),y=null===c||null===p||null===h,b=o().useMemo(()=>(c||[]).reduce((e,t)=>e+(t.contacts||0),0),[c]),j=o().useMemo(()=>(h||[]).length,[h]),v=o().useMemo(()=>{let e=(p||[]).filter(e=>null!==e.cpl);return 0===e.length?null:e.reduce((e,t)=>e.cpl<t.cpl?e:t)},[p]);return(0,s.jsxs)("main",{style:{padding:24,maxWidth:1400,margin:"0 auto",fontFamily:"system-ui, sans-serif"},children:[s.jsx("h1",{style:{fontSize:28,fontWeight:700,marginBottom:8},children:"\uD83D\uDCCA Avito Мульти-компания (реальные данные через Supabase RPC)"}),s.jsx("p",{style:{color:"#6c757d",marginBottom:16},children:"Анализ данных по нескольким компаниям с реальными данными из Supabase."}),(0,s.jsxs)("section",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:20},children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"company",style:{display:"block",fontSize:12,color:"#555"},children:"Компания"}),s.jsx("select",{id:"company",value:e,onChange:e=>t(e.target.value),style:{padding:"6px 10px",border:"1px solid #e1e1e1",borderRadius:6},children:[{value:"seltka",label:"Сэлтка (Кирилл)"},{value:"iltech",label:"Ильтех (Ильнур)"},{value:"mituroom",label:"mituroom (Артем)"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"days",style:{display:"block",fontSize:12,color:"#555"},children:"Дней"}),(0,s.jsxs)("select",{id:"days",value:r,onChange:e=>d(Number(e.target.value)),style:{padding:"6px 10px",border:"1px solid #e1e1e1",borderRadius:6},children:[s.jsx("option",{value:7,children:"7"}),s.jsx("option",{value:14,children:"14"}),s.jsx("option",{value:30,children:"30"}),s.jsx("option",{value:60,children:"60"}),s.jsx("option",{value:90,children:"90"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"city",style:{display:"block",fontSize:12,color:"#555"},children:"Город (опц.)"}),s.jsx("input",{id:"city",value:n,onChange:e=>a(e.target.value),placeholder:"например, Казань",style:{padding:"6px 10px",border:"1px solid #e1e1e1",borderRadius:6}})]})]}),y&&s.jsx("div",{style:{padding:16,color:"#6c757d"},children:"Загрузка данных…"}),f&&(0,s.jsxs)("div",{style:{padding:16,color:"#721c24",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:8,marginBottom:16},children:["Ошибка: ",f]}),!y&&!f&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("section",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:20},children:[(0,s.jsxs)("div",{style:{background:"#fff",border:"1px solid #eee",borderRadius:8,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Всего контактов"}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:b.toLocaleString("ru-RU")})]}),(0,s.jsxs)("div",{style:{background:"#fff",border:"1px solid #eee",borderRadius:8,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Городов в топ-таблице"}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:j})]}),(0,s.jsxs)("div",{style:{background:"#fff",border:"1px solid #eee",borderRadius:8,padding:16},children:[s.jsx("div",{style:{fontSize:12,color:"#666"},children:"Лучшая стратегия по CPL"}),s.jsx("div",{style:{fontSize:24,fontWeight:700},children:v?`${v.strategy} (${Math.round(v.cpl||0)} ₽)`:"—"})]})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[(0,s.jsxs)("section",{children:[s.jsx("h2",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"Топ городов по контактам"}),s.jsx("div",{style:{overflowX:"auto",background:"#fff",border:"1px solid #eee",borderRadius:8},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{style:{background:"#f8f9fa"},children:[s.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #eee"},children:"Город"}),s.jsx("th",{style:{textAlign:"right",padding:8,borderBottom:"1px solid #eee"},children:"Контакты"})]})}),s.jsx("tbody",{children:(h||[]).map((e,t)=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1"},children:e.city}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1",textAlign:"right"},children:e.contacts.toLocaleString("ru-RU")})]},`${e.city}-${t}`))})]})})]}),(0,s.jsxs)("section",{children:[s.jsx("h2",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:"CPL по стратегиям"}),s.jsx("div",{style:{overflowX:"auto",background:"#fff",border:"1px solid #eee",borderRadius:8},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{style:{background:"#f8f9fa"},children:[s.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #eee"},children:"Стратегия"}),s.jsx("th",{style:{textAlign:"right",padding:8,borderBottom:"1px solid #eee"},children:"Контакты"}),s.jsx("th",{style:{textAlign:"right",padding:8,borderBottom:"1px solid #eee"},children:"Затраты (₽)"}),s.jsx("th",{style:{textAlign:"right",padding:8,borderBottom:"1px solid #eee"},children:"CPL (₽)"})]})}),s.jsx("tbody",{children:(p||[]).map((e,t)=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1"},children:e.strategy}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1",textAlign:"right"},children:e.contacts.toLocaleString("ru-RU")}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1",textAlign:"right"},children:Math.round(e.cost).toLocaleString("ru-RU")}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1",textAlign:"right"},children:null!==e.cpl?Math.round(e.cpl).toLocaleString("ru-RU"):"—"})]},`${e.strategy}-${t}`))})]})})]})]}),(0,s.jsxs)("section",{style:{marginTop:16},children:[(0,s.jsxs)("h2",{style:{fontSize:18,fontWeight:700,marginBottom:8},children:["Недавние контакты (последние ",r," дн.) ",n.trim()?`— ${n.trim()}`:""]}),s.jsx("div",{style:{overflowX:"auto",background:"#fff",border:"1px solid #eee",borderRadius:8},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{style:{background:"#f8f9fa"},children:[s.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #eee"},children:"Дата"}),s.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #eee"},children:"Город"}),s.jsx("th",{style:{textAlign:"left",padding:8,borderBottom:"1px solid #eee"},children:"Объявление"}),s.jsx("th",{style:{textAlign:"right",padding:8,borderBottom:"1px solid #eee"},children:"Контакты"})]})}),s.jsx("tbody",{children:(c||[]).map((e,t)=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1"},children:new Date(e.date).toLocaleDateString("ru-RU")}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1"},children:e.city}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1"},children:e.ad_id}),s.jsx("td",{style:{padding:8,borderBottom:"1px solid #f1f1f1",textAlign:"right"},children:e.contacts.toLocaleString("ru-RU")})]},`${e.ad_id}-${e.date}-${t}`))})]})})]})]})]})}function a(){return s.jsx(i.Suspense,{fallback:s.jsx("div",{style:{padding:32,textAlign:"center",color:"#6c757d"},children:"Загрузка..."}),children:s.jsx(n,{})})}},5397:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>o,default:()=>n,dynamic:()=>d});var s=r(8570);let i=(0,s.createProxy)(String.raw`/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/avito-multi/page.tsx`),{__esModule:o,$$typeof:l}=i;i.default;let d=(0,s.createProxy)(String.raw`/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/avito-multi/page.tsx#dynamic`),n=(0,s.createProxy)(String.raw`/Users/macbookpro/Desktop/defires/yandex_market/telefon_1/swer4ock-analytics-ui/src/app/avito-multi/page.tsx#default`)},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var s=r(9510);let i={title:"swer4ock analytics"};function o({children:e}){return s.jsx("html",{lang:"ru",children:s.jsx("body",{style:{margin:0,fontFamily:"system-ui, sans-serif"},children:e})})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,471],()=>r(3411));module.exports=s})();